<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">

<head>
    <style>
    @import url('https://cdn.rawgit.com/moonspam/NanumSquare/master/nanumsquare.css');
    @font-face {
    font-family: 'NanumSquareRound';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/NanumSquareRound.woff') format('woff');
    font-weight: normal;
    font-style: normal;}

        .page ul li {
            list-style-type: none;
            float: left;
            margin: 10px;
        }


        #chat input, #chat span{
            display: block;
        }
        .body{
            font-family:'NanumSquare';
        }
        .top{
            height:60px;
        }
        #chatlog{
            height: 600px;
            background:#f9f9f9;
        }
        #conver{
            height: 70px;
            background:#f5f5f5;
        }
        .log{
            height: 100px;

        }
        .leftbox{
            background:#fff;
            width:100%;
            height:50px;

        }

    </style>

    <script>
        function chat() {
            let inputValue = document.getElementById("inputChat").value;
            let data = {
                chat : inputValue
            }
            let chatDiv = document.getElementById("chat");
            let receiveChat = document.createElement("span");
            let pastSpan = document.createElement("span");
            $('input').remove();
            pastSpan.innerText = inputValue;

            let newInput = document.createElement("input");
            newInput.setAttribute("id", "inputChat");

            $.ajax({
                type:'POST',
                url:'/app/chat',
                data:JSON.stringify(data),
                contentType:"application/json;charset=UTF-8", //body 데이터가 어떤 타입인지
            }).done(function (response) {
                receiveChat.innerText = response.chat;
            }).fail(function () {
                console.log("fail");
                receiveChat.innerText = "안녕하세요";
            });

            chatDiv.appendChild(pastSpan);
            chatDiv.appendChild(receiveChat);
            chatDiv.appendChild(newInput);
        }

    </script>
</head>

<div layout:fragment="content">

    <div class="body" style="margin: auto; width: 830px; padding-top:70px">

        <div class="top">

                <span id="create" style="font-size: 30px;color:#444444;font-weight:bold">#대화하기</span>
        </div>



        <div id="chatlog">
            <div class="log">
                <div class="leftbox">
                    <span>123</span>
                </div>
            </div>

            <div class="log">

            </div>

            <div class="log">

            </div>

            <div class="log">

            </div>

            <div class="log">

            </div>

            <div class="log">

            </div>
        </div>
        <div id="conver">

        </div>



    <!--<div id="chat">
        <button class="btn btn-info" onclick="chat()">전송</button>

        <input id="inputChat">
    </div>-->
    </div>
</div>

</html>
